source_all() {
    for dir in $*; do
        if [ -e $dir/index ]; then
            files=(`cat $dir/index | while read f; do echo $dir/$f; done`)
        else
            files=($dir/*)
        fi
        #echo "${files[@]}"
        for f in "${files[@]}"; do
            source $f
        done
    done
}

# vim:filetype=sh
